<c-col xs="12">
    <c-card class="mb-4">
      <c-card-header>
        <strong>Aspirantes por Convenio</strong> &nbsp; <small>Módulo para verificación de aspirantes</small>
      </c-card-header>
      <c-card-body >
        <p *ngIf="hayResultadosRecibidas" class="card-text">
          Este listado muestra a los aspirantes que fueron cargados como T.S.U. para el periodo académico actual.
          <strong>Las solicitudes que aparecen aquí están pendientes por procesar</strong>, lo que significa que están en fase de revisión por la escuela.
        </p>
        
        <div *ngIf="hayResultadosRecibidas" class="alert alert-warning d-flex justify-content-between align-items-center">
          <span>
            <strong>Atención:</strong> Hasta que no se verifiquen y procesen estas solicitudes, no se podrá iniciar el proceso de inscripción de los nuevos ingresos por convenio.
          </span>
          <svg cIcon class="me-2" name="cil-warning" width="24" height="24"></svg>
        </div>
          <div *ngIf="hayResultadosRecibidas">
            <mat-form-field>
                <input matInput (keyup)="applyFilterProcesadas($event)" placeholder="Buscar aspirante" #input>
              </mat-form-field>
              <table mat-table [dataSource]="procesadas"  [hover]="true"
              [responsive]="true"
              [striped]="true"
              align="middle"
              cTable
              class="mb-0 border" cTable>
              <ng-container matColumnDef="estatus">
                <th class="estatus-ancho" mat-header-cell *matHeaderCellDef> Estatus </th>
                <td class="estatus-ancho" mat-cell *matCellDef="let solicitud">
                  <div class="container" 
                       cTooltip="{{ 
                          solicitud.confirma == '0' ? 'Precargado: El aspirante está precargado en el sistema pero aún no se ha inscrito.' : 
                          solicitud.confirma == '1' ? 'Inscrito: El aspirante ya completó la inscripción.' : 
                          solicitud.confirma == '99' ? 'En revisión: El aspirante está en revisión por la Escuela.' : '' }}" 
                       cTooltipPlacement="right">
                    
                    <!-- Icono para Estatus 0: No inscrito, pero precargado en el sistema -->
                    <svg *ngIf="solicitud.confirma == '0'" cIcon width="30" height="30" name="cilClock" style="color: #f9b115;"></svg>
              
                    <!-- Icono para Estatus 1: Inscrito -->
                    <svg *ngIf="solicitud.confirma == '1'" cIcon width="30" height="30" name="cilCheckCircle" style="color: #2EB85C;"></svg>
              
                    <!-- Icono para Estatus 99: En revisión -->
                    <svg *ngIf="solicitud.confirma == '99'" cIcon width="30" height="30" name="cilSearch" style="color: #ffcc00;"></svg>
                    
                  </div>
                </td>
              </ng-container>              
                <ng-container matColumnDef="id_estudiante">
                  <th class="cedula-ancho" mat-header-cell *matHeaderCellDef> Identificación </th>
                  <td class="cedula-ancho" mat-cell *matCellDef="let solicitud"> {{solicitud.id_estudiante}} </td>
                </ng-container>
                <ng-container matColumnDef="nombre_completo">
                  <th mat-header-cell *matHeaderCellDef> Apellidos y nombres </th>
                  <td mat-cell *matCellDef="let solicitud"> {{solicitud.nombre_completo}} </td>
                </ng-container>
                <ng-container matColumnDef="pnf">
                  <th mat-header-cell *matHeaderCellDef> Programa Académico </th>
                  <td mat-cell *matCellDef="let solicitud"> {{solicitud.nombre_programa}} </td>
                </ng-container>
                <ng-container matColumnDef="ente">
                    <th mat-header-cell *matHeaderCellDef> Ente </th>
                    <td mat-cell *matCellDef="let solicitud"> {{solicitud.convenio}} </td>
                  </ng-container>
                <ng-container matColumnDef="fecha_carga">
                  <th mat-header-cell *matHeaderCellDef> Fecha de carga </th>
                  <td mat-cell *matCellDef="let solicitud"> {{solicitud.fecha_carga}} </td>
                </ng-container>
                <ng-container matColumnDef="gestion">
                  <th class="gestion-ancho" mat-header-cell *matHeaderCellDef> Gestionar </th>
                  <td class="gestion-ancho" mat-cell *matCellDef="let solicitud">
                    <div class="d-flex justify-content-center align-items-center">
                      <!-- Botón para editar, deshabilitado si solicitud.confirma no es '0' -->
                      <div class="m-1">
                        <button cButton class="btn-primary" size="sm" cTooltip="Verificar datos" cTooltipPlacement="top"
                        (click)="abrirModalDetalleTSU(solicitud)">
                          <svg cIcon name="cil-magnifying-glass"></svg>
                        </button>
                      </div>                
                    </div>
                  </td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumnsProcesadas"></tr>
                <tr mat-row *matRowDef="let row; columns: displayedColumnsProcesadas;"></tr>
              </table>
        </div>

<br>
          <div *ngIf="sinResultadosRecibidas">
            <c-alert color="success" class="d-flex align-items-center">
              <svg cIcon class="me-2" width="24" height="24" name="cilNoteAdd"></svg>
              <div>No existen aspirantes por convenio cargados pendientes de revisión</div>
            </c-alert>
          </div>
          <mat-paginator [hidePageSize]="true" [pageSize]="5" #paginatorProcesadas></mat-paginator>
      </c-card-body>
    </c-card>
  </c-col>

<!-- Modal -->
  <ngx-spinner bdColor="rgba(51, 51, 51, 0.8)" size="default" type="ball-atom">
		<p style="color: white" align="center">Por favor espere... <br>¡Validando información!</p>
	  </ngx-spinner>