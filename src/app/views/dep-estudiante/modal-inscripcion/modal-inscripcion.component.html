<div class="modal-header">
    <div>
      <h2 class="modal-title" >Inscripción de Unidades Curriculares</h2>
    </div>
  </div>
  <div class="modal-body">
    <div class="scrollable-content">
        <p>
            <svg cIcon name="cil-info" class="me-2"></svg>
            Por favor pulse sobre el trayecto para seleccionar las Unidades Curriculares a inscribir.
          </p>
          <mat-accordion>
            <!-- Iterar sobre los trayectos del plan seleccionado -->
            <mat-expansion-panel *ngFor="let trayecto of trayectos; trackBy: trackByCodigoUC" (opened)="cargarUnidadesCurriculares(trayecto.nombre_trayecto)">
              <mat-expansion-panel-header class="expancion-header mat-expansion-panel-header ng-tns-c48-104 ng-trigger ng-trigger-expansionHeight ng-star-inserted">
                <mat-panel-title>
                  {{ trayecto.nombre_trayecto }}
                </mat-panel-title>
              </mat-expansion-panel-header>
        
              <!-- Mostrar los semestres para planes semestrales -->
              <div *ngIf="datosRegimen?.regimen  === 'SEMESTRAL'">
                <mat-accordion>
                  <mat-expansion-panel *ngFor="let semestre of trayecto.semestres" (opened)="cargarUnidadesCurriculares(trayecto.nombre_trayecto)">
                    <mat-expansion-panel-header class="expancion-header mat-expansion-panel-header ng-tns-c48-104 ng-trigger ng-trigger-expansionHeight ng-star-inserted">
                      <mat-panel-title>
                        Semestre {{ semestre.numero }}
                      </mat-panel-title>
                    </mat-expansion-panel-header>
                    <!-- Contenido del semestre, como un botón para añadir unidades curriculares -->
                      <div *ngIf="unidadesCurriculares.length">
                          <table mat-table [dataSource]="unidadesCurriculares">
                            <!-- Columnas del mat-table -->
                            <ng-container matColumnDef="acta">
                              <th mat-header-cell *matHeaderCellDef> Acta </th>
                              <td mat-cell *matCellDef="let uc"> {{ uc.acta }} </td>
                            </ng-container>

                            <ng-container matColumnDef="codigo_uc">
                              <th mat-header-cell *matHeaderCellDef> Código UC </th>
                              <td mat-cell *matCellDef="let uc"> {{ uc.codigo_uc }} </td>
                            </ng-container>

                            <ng-container matColumnDef="nombre_uc">
                              <th mat-header-cell *matHeaderCellDef> Nombre UC </th>
                              <td mat-cell *matCellDef="let uc"> {{ uc.nombre_uc }} </td>
                            </ng-container>

                            <ng-container matColumnDef="creditos">
                              <th mat-header-cell *matHeaderCellDef> Créditos </th>
                              <td mat-cell *matCellDef="let uc"> {{ uc.creditos }} </td>
                            </ng-container>

                            <ng-container matColumnDef="es_electiva">
                              <th mat-header-cell *matHeaderCellDef> Electiva </th>
                              <td mat-cell *matCellDef="let uc"> {{ uc.es_electiva }} </td>
                            </ng-container>
                            <!-- Más columnas para nombre_uc, creditos, es_electiva... -->
                            <tr mat-header-row *matHeaderRowDef="['acta','codigo_uc', 'nombre_uc', 'creditos', 'es_electiva']"></tr>
                            <tr mat-row *matRowDef="let row; columns: ['acta','codigo_uc', 'nombre_uc', 'creditos', 'es_electiva'];"></tr>
                          </table>
                        </div>
                  </mat-expansion-panel>
                </mat-accordion>
              </div>
              
              <div *ngIf="datosRegimen?.regimen !== 'SEMESTRAL'">
                <br>
                <div *ngIf="todasUCInscritas">
                  <c-alert color="info" class="d-flex align-items-center">
                    <svg cIcon class="me-2" width="24" height="24" name="cilInfo"></svg>
                    <div>Estudiante ya tiene todas las unidades curriculares ya están inscritas de este trayecto.</div>
                  </c-alert>
                </div>
                <div *ngIf="sinSeccion">
                  <c-alert color="warning" class="d-flex align-items-center">
                    <svg cIcon class="me-2" width="24" height="24" name="cilWarning"></svg>
                    <div>No hay secciones creadas para este trayecto/periodo.</div>
                  </c-alert>
                </div>
                <div *ngIf="sinResultadosUC && !todasUCInscritas && !sinSeccion">
                  <c-alert color="danger" class="d-flex align-items-center">
                    <svg cIcon class="me-2" width="24" height="24" name="cilBan"></svg>
                    <div>No hay unidades curriculares disponibles para inscripción.</div>
                  </c-alert>
                </div>
                  <div *ngIf="unidadesCurriculares.length">
                      <table mat-table [dataSource]="unidadesCurriculares">
                          <!-- Columnas del mat-table -->

                          <ng-container matColumnDef="acta">
                            <th mat-header-cell *matHeaderCellDef> Acta </th>
                            <td mat-cell *matCellDef="let uc"> {{ uc.acta }} </td>
                          </ng-container>

                          <ng-container matColumnDef="seleccion">
                            <th mat-header-cell *matHeaderCellDef >Selección</th>
                            <td mat-cell *matCellDef="let materias" >
                              <mat-checkbox color="azul-unetrans" [(ngModel)]="materias.seleccionado"> </mat-checkbox>
                            </td>
                          </ng-container>
                          <ng-container matColumnDef="periodo">
                            <th mat-header-cell *matHeaderCellDef >Periodo</th>
                            <td mat-cell *matCellDef="let materias" >{{materias.periodo}}
                            </td>
                            
                          </ng-container>

                          <ng-container matColumnDef="código">
                            <th mat-header-cell *matHeaderCellDef >Código UC</th>
                            <td mat-cell *matCellDef="let materias" >{{materias.cod_ucurr}}
                            </td>
                            
                          </ng-container>
                          <ng-container matColumnDef="nombre">
                            <th mat-header-cell *matHeaderCellDef >Nombre Unidad Curricular</th>
                            <td mat-cell *matCellDef="let materias" >{{materias.uni_curr}}</td>
                          </ng-container>
                          <ng-container matColumnDef="créditos">
                            <th mat-header-cell *matHeaderCellDef >Cant Créditos UC</th>
                            <td mat-cell *matCellDef="let materias" >{{materias.uni_cred}}</td>
                          </ng-container>
                          <ng-container matColumnDef="seccion">
                            <th mat-header-cell *matHeaderCellDef >Sección</th>
                            <td mat-cell *matCellDef="let materias" >{{materias.seccion}}</td>
                          </ng-container>

                          
                          <!-- Más columnas para nombre_uc, creditos, es_electiva... -->
                          <tr mat-header-row *matHeaderRowDef="['acta','seleccion','periodo', 'código', 'nombre', 'créditos','seccion']"></tr>
                          <tr mat-row *matRowDef="let row; columns: ['acta','seleccion','periodo', 'código', 'nombre', 'créditos','seccion'];"></tr>
                        </table>
                    </div>
              </div>
              <div class="text-end mt-3" *ngIf="unidadesCurriculares.length > 0 && !todasUCInscritas && !sinSeccion && !sinResultadosUC">
                <button type="button" class="btn btn-primary" (click)="inscribir()">
                  <svg cIcon class="me-2" name="cil-cloud-upload"></svg>Inscribir UC
                </button>
              </div>
            </mat-expansion-panel>
          </mat-accordion>
    </div>

  </div>
<div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="closeModal()">Cerrar</button>
    <!-- <button type="button" class="btn btn-primary" (click)="openActa.hide()" (click)="guardar()"><svg cIcon class="me-2" name="cil-cloud-download"></svg>Descargar PDF</button> -->
  </div>
