<div class="modal-header">
  <h4 class="modal-title">Bienvenid@ al proceso de migraci√≥n de datos de la UNETRANS</h4>
</div>
<div class="modal-body">
  <div *ngIf="estudianteBase.estatus_migra === 3">
    <div class="alert alert-warning" role="alert">
      <strong>Hola {{ estudianteBase.nombre_corto }}!</strong>
      <p>Hemos identificado incongruencias en tu perfil que requieren atenci√≥n antes de continuar con el proceso de
        migraci√≥n. Es necesario que solicites una revisi√≥n para ajustar y validar esta informaci√≥n. Una vez completado
        este paso, procederemos internamente a actualizar tu expediente y te informaremos por correo electr√≥nico para
        que puedas avanzar en el proceso.</p>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="termsCheckbox" [(ngModel)]="termsAccepted">
      <label class="form-check-label" for="termsCheckbox">
        Acepto solicitar la revisi√≥n necesaria.
      </label>
    </div>
    <div>

    </div>
    <form [formGroup]="form">
      <div class="row" *ngIf="termsAccepted">
        <div class="col l12 m12 s12">
          <label>Verificaci√≥n del correo electr√≥nico:</label>
          <div class="row mar-b-0">
            <div class="col s12">
              <mat-form-field appearance="fill">
                <mat-label>Correo electr√≥nico</mat-label>
                <input type="email" matInput formControlName="email">
                <button mat-button matSuffix (click)="verifyEmail()" [disabled]="!form.get('email')?.valid || emailDuplicado">Verificar</button>
                <mat-error *ngIf="form.get('email')?.errors?.['emailDuplicado']">
                  El correo ya est√° registrado.
                </mat-error>
                <mat-error *ngIf="form.get('email')?.errors?.['pattern']">
                  Solo se aceptan correos de dominio @gmail.com
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col s12">
              <mat-form-field appearance="fill">
                <mat-label>C√≥digo de verificaci√≥n</mat-label>
                <input type="text" matInput formControlName="validationCode">
                <button mat-button matSuffix (click)="validateCode()" [disabled]="!form.get('validationCode')?.valid">Validar</button>
                <mat-error *ngIf="form.get('validationCode')?.errors?.['minlength']">
                  El c√≥digo debe tener al menos 6 d√≠gitos.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>

  <div *ngIf="estudianteBase.estatus_migra === 4">
      <div class="alert alert-info" role="alert">
        <strong>¬°Hola {{ estudianteBase.nombre_corto }}! üëã</strong>
        <p>üìù Hemos recibido tu solicitud de revisi√≥n de datos y actualmente se encuentra en proceso de evaluaci√≥n. Entendemos la importancia de este asunto para ti y queremos asegurarte que estamos trabajando diligentemente para resolverlo lo antes posible.</p>
        <p>‚è≥ El proceso de revisi√≥n es meticuloso y puede requerir algo de tiempo para garantizar que toda la informaci√≥n sea correcta y est√© actualizada. Agradecemos tu paciencia y comprensi√≥n durante este periodo.</p>
        <p>üì¨ Una vez finalizada la revisi√≥n, te notificaremos por correo electr√≥nico los resultados y los pasos a seguir para que puedas continuar con el proceso de migraci√≥n sin inconvenientes.</p>
        <p>üí¨ Si tienes preguntas adicionales o necesitas asistencia durante este tiempo, estamos disponibles en la taquilla de la Universidad de <strong>martes a jueves, 8:30 AM a 12:00 M</strong></p>
      </div>  
  </div>


  <div *ngIf="estudianteBase.estatus_migra === 0">
    <c-alert color="info">
      <strong>¬°Atenci√≥n {{ estudianteBase.nombre_corto }}! </strong>
      <ul>
        <li>Revisa tus datos personales.</li>
        <li>Confirma tu programa de estudio/carrera.</li>
        <li>Verifica tu cohorte. (A√±o de ingreso)</li>
      </ul>
      Si algo no est√° correcto, usa el bot√≥n "Hay datos incorrectos" abajo para solicitar una revisi√≥n. Tambi√©n estamos
      disponibles en la taquilla de la Universidad de <strong>martes a jueves, 8:30 AM a 12:00 M</strong>.
    </c-alert>
    <div class="estudiante-container">
      <!-- Contenedor de Datos Personales -->
      <div class="datos-estudiante">
        <p><strong>Carnet:</strong> {{ estudianteBase.carnet_formateado }} | <strong>Documento de Identidad:</strong> {{
          estudianteBase.nac }}-{{
          estudianteBase.cedula_formateada }}</p>
        <p><strong>Nombre completo:</strong> {{ estudianteBase.nombre_completo }}</p>
        <p><strong>Cohorte:</strong> {{ estudianteBase.cohorte }} | <strong>PNF/Carrera:</strong> {{ estudianteBase.pnf
          }}</p>
      </div>
    </div>
    <br>

    <div [formGroup]="form2">
      <!-- Botones de radio para datos correctos/incorrectos -->
      <mat-radio-group formControlName="datosCorrectos">
        <mat-radio-button value="si">Mis datos son correctos</mat-radio-button>
        <mat-radio-button value="no">Hay datos incorrectos</mat-radio-button>
      </mat-radio-group>
      <!-- Secci√≥n de verificaci√≥n del correo electr√≥nico -->
      <div *ngIf="form2.get('datosCorrectos')?.value" class="row">
        <div class="col l12 m12 s12">
          <c-alert color="info">
            <strong>Informaci√≥n Importante:</strong><br>
            Registra un <strong>correo de GMAIL v√°lido</strong> al que tengas acceso. Te enviaremos un c√≥digo de verificaci√≥n a este correo. <br>
            Verifica tu bandeja de entrada y la carpeta de SPAM. Para asistencia, contacta a: soportesice@unetrans.edu.ve
          </c-alert>
          <label>Verificaci√≥n del correo electr√≥nico:</label>
          <div class="row mar-b-0">
            <div class="col s12">
              <mat-form-field appearance="fill">
                <mat-label>Correo electr√≥nico</mat-label>
                <input type="email" matInput formControlName="email">
                <button mat-button matSuffix (click)="verifyEmail2()" [disabled]="!form2.get('email')?.valid || emailDuplicado">Verificar</button>
                <mat-error *ngIf="form2.get('email')?.errors?.['emailDuplicado']">
                  El correo ya est√° registrado.
                </mat-error>
                <mat-error *ngIf="form2.get('email')?.errors?.['pattern']">
                  Solo se aceptan correos de dominio @gmail.com
                </mat-error>
              </mat-form-field>
            </div>
            <div class="col s12">
              <mat-form-field appearance="fill">
                <mat-label>C√≥digo de verificaci√≥n</mat-label>
                <input type="text" matInput formControlName="validationCode">
                <button mat-button matSuffix (click)="validateCode2()" [disabled]="!form2.get('validationCode')?.valid">Validar</button>
                <mat-error *ngIf="form2.get('validationCode')?.errors?.['minlength']">
                  El c√≥digo debe tener al menos 6 d√≠gitos.
                </mat-error>
              </mat-form-field>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

</div>
<div class="modal-footer">
  <button type="button" class="btn btn-secondary" (click)="closeModal()">Salir</button>
</div>